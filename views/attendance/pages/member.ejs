<!DOCTYPE html>
<html>
    <head>
        <title>Attendance</title>
        <%- include(__base + 'views/new/partials/favicon.ejs') %>

        <!-- External Styles -->
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">

        <!-- Page Scripts-->
        <script src="/new/js/vendored/qrcode.min.js" type="text/javascript" defer></script>
        <script src="/new/js/qr.js?v=2" type="text/javascript" defer></script>

         <!-- Site Styles -->
         <link rel="stylesheet" href="/new/css/theme.css" />
         <link rel="stylesheet" href="/new/css/attendanceHeader.css" />
         <link rel="stylesheet" href="/new/css/attendanceMember.css?v=3" />
    </head>
    <body>
        <%- include(__base + 'views/new/partials/attendanceHeader.ejs') %>
        <% if (auth.level == ranks.checkin_tablet) { %>
            <meta http-equiv="Refresh" content="0; url=https://robotics.harker.org/member/attendance/scanner" />
        <% } %>
        <% if (auth.level >= ranks.lead && auth.level != ranks.checkin_tablet) { %>
            <div id="admin-icons">
                <a class="admin-icon" href="attendance">
                    <svg class="admin-image" viewBox="0 0 24 24">
                        <path fill="none" d="M0 0h24v24H0z"/>
                        <path fill="#C4C4C4" d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
                    </svg>
                </a>
                <% if (auth.level >= ranks.lead) { %>
                <a class="admin-icon" href="attendance/attendance">
                    <svg class="admin-image" viewBox="0 0 24 24">
                        <path fill="none" d="M0 0h24v24H0z"/>
                        <path fill="#C4C4C4" d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                    </svg>
                </a>
                <% } %>
                <a class="admin-icon" href="attendance/scanner">
                    <svg class="admin-icon" id="idk" viewBox="0 0 24 24">
                        <circle cx="12" cy="14" r="3.2" fill="#C4C4C4"/>
                        <circle cx="12" cy="14" r="5" fill="none"/>
                        <path fill="#C4C4C4" d="M16 3.33c2.58 0 4.67 2.09 4.67 4.67H22c0-3.31-2.69-6-6-6v1.33M16 6c1.11 0 2 .89 2 2h1.33c0-1.84-1.49-3.33-3.33-3.33V6"/>
                        <path fill="none" d="M24 0H0v24h24V0z"/>
                        <path fill="#c4c4c4" d="M17 9c0-1.11-.89-2-2-2V4H9L7.17 6H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9h-5zm-5 10c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
                    </svg>
                </a>
            </div>
            <% } %>
        <% if (auth.level != ranks.checkin_tablet && auth.level != ranks.mentor) { %>
            <div id="canvas-wrapper">
                <canvas id="qr-canvas" width="512" height="512"></canvas>
            </div>
            <div class="checkbox-wrapper">
                <% for (team in subteams) { %>
                    <div class="checkbox-container">
                        <input type="checkbox" class="attendance-checkbox" id="<%- team -%>_checkbox" value="<%- team -%>" onchange="updateQR()">
                        <label for="<%- team -%>_checkbox"><%- subteams[team] -%></label>
                    </div>
                <% } %>
            </div>
        <% } %>
        <% if(checkedIn && auth.level >= ranks.triumvirate) { %>
            <div id="checkoutbutton">
                <button id="check-out-button">Check out</button>
            </div>
        <% } %>
    </body>
</html>
